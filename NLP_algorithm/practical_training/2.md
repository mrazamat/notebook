# Текстовые ресурсы и корпусы: Основы корпусной лингвистики и принципы построения корпуса

**Предмет:** Алгоритмы NLP  
**Специальность:** Компьютерная лингвистика



## 1. Введение в корпусную лингвистику

### 1.1 Определение корпуса

**Корпус текстов** (текстовый корпус) — это большое, структурированное собрание текстов в электронной форме, созданное для лингвистических исследований и обучения моделей NLP.

**Основные характеристики корпуса:**
- Репрезентативность — отражает реальное употребление языка
- Сбалансированность — включает разные жанры и стили
- Размеченность — содержит лингвистические аннотации
- Машиночитаемость — представлен в электронном формате
- Документированность — имеет описание структуры и метаданных

### 1.2 История корпусной лингвистики

Корпусная лингвистика зародилась в 1960-х годах с появлением первых компьютеризированных текстовых коллекций. Ключевые этапы развития:

- **1960-е:** Brown Corpus (первый современный корпус английского языка, 1 млн слов)
- **1970-е:** развитие методов автоматической обработки текстов
- **1980-е:** создание больших национальных корпусов
- **1990-е:** появление интернет-корпусов и многоязычных ресурсов
- **2000-е:** корпусы объемом в миллиарды слов, автоматическая разметка
- **2010-е:** интеграция с глубоким обучением, трансформеры

### 1.3 Типы корпусов

**По объему:**
- Малые корпусы (до 1 млн словоупотреблений)
- Средние корпусы (1-100 млн словоупотреблений)
- Большие корпусы (более 100 млн словоупотреблений)
- Мегакорпусы (миллиарды словоупотреблений)

**По содержанию:**
- Общеязыковые (сбалансированные)
- Специализированные (определенный домен или жанр)
- Параллельные (тексты и их переводы)
- Сопоставительные (тексты на разных языках)
- Диахронические (тексты разных временных периодов)
- Устной речи
- Учебные корпусы (тексты изучающих язык)

**По степени разметки:**
- Неразмеченные (сырой текст)
- Размеченные:
  - Морфологически
  - Синтаксически
  - Семантически
  - Прагматически



## 2. Принципы построения корпуса

### 2.1 Планирование корпуса

**Этапы создания корпуса:**

1. **Определение целей и задач**
   - Для каких исследований или задач создается корпус?
   - Какие лингвистические явления должны быть представлены?
   - Кто будет пользователями корпуса?

2. **Определение дизайна корпуса**
   - Объем корпуса
   - Временные рамки (современный язык или исторический период)
   - Географический охват (диалекты, региональные варианты)
   - Жанровое разнообразие

3. **Разработка схемы выборки**
   - Пропорциональная выборка (по частотности жанров)
   - Стратифицированная выборка (равное представление категорий)
   - Случайная выборка

### 2.2 Критерии репрезентативности

Корпус должен представлять изучаемый язык или его вариант максимально полно:

**Параметры репрезентативности:**
- Жанровое разнообразие (художественная литература, публицистика, научные тексты, разговорная речь)
- Тематическое покрытие
- Временной срез
- Авторское разнообразие
- Региональная представленность

**Правило баланса:** ни одна категория текстов не должна доминировать, если корпус позиционируется как общеязыковой.

### 2.3 Сбор и предобработка текстов

**Источники текстов:**
- Печатные издания (книги, журналы, газеты)
- Интернет-ресурсы (веб-страницы, блоги, социальные сети)
- Устная речь (транскрибированные записи)
- Специализированные базы данных

**Юридические аспекты:**
- Соблюдение авторских прав
- Лицензии на использование (Creative Commons, Public Domain)
- Анонимизация персональных данных

**Предобработка:**
- Конвертация в единый формат (обычно plain text или XML)
- Очистка от технических элементов (HTML-тегов, служебной информации)
- Нормализация кодировки (UTF-8)
- Сегментация на предложения и токены
- Удаление дубликатов

### 2.4 Структура и формат хранения

**Популярные форматы:**

**Plain Text:**
```
Это простой текст без разметки.
Каждая строка — это предложение или абзац.
```

**XML/TEI (Text Encoding Initiative):**
```xml
<text>
  <body>
    <p>
      <s>Это предложение в формате XML.</s>
      <s>Оно содержит структурную разметку.</s>
    </p>
  </body>
</text>
```

**CoNLL-U (для морфосинтаксической разметки):**
```
1    Это      это      PRON   _    Case=Nom|Number=Sing    0    root    _    _
2    пример   пример   NOUN   _    Case=Nom|Number=Sing    1    nsubj   _    _
3    .        .        PUNCT  _    _                       1    punct   _    _
```

**JSON:**
```json
{
  "text": "Это пример предложения.",
  "tokens": ["Это", "пример", "предложения", "."],
  "pos_tags": ["PRON", "NOUN", "NOUN", "PUNCT"]
}
```

### 2.5 Метаданные

Метаданные описывают характеристики текстов в корпусе:

**Обязательные метаданные:**
- Автор
- Название
- Дата создания
- Жанр/тип текста
- Источник

**Дополнительные метаданные:**
- Тематика
- Регион
- Возраст и пол автора (для некоторых задач)
- Уровень сложности текста
- Лицензия

**Пример метаданных в XML:**
```xml
<text id="001">
  <metadata>
    <author>И. С. Тургенев</author>
    <title>Отцы и дети</title>
    <year>1862</year>
    <genre>художественная литература</genre>
    <words>67000</words>
  </metadata>
  <body>
    <!-- текст -->
  </body>
</text>
```



## 3. Типы лингвистической разметки

### 3.1 Морфологическая разметка (POS-tagging)

Приписывание каждому слову информации о части речи и грамматических характеристиках.

**Пример:**
```
Слово: "читаю"
Лемма: "читать"
POS: VERB
Грамматика: Number=Sing|Person=1|Tense=Pres|VerbForm=Fin
```

**Популярные наборы тегов:**
- Universal Dependencies (универсальная схема для многих языков)
- Penn Treebank (для английского)
- НКРЯ (для русского языка)

### 3.2 Синтаксическая разметка

**Constituency parsing (составляющие):**
```
(S (NP (DET Этот) (NOUN студент))
   (VP (VERB читает) (NP (NOUN книгу))))
```

**Dependency parsing (зависимости):**
```
читает (корень)
  ├── студент (nsubj)
  │     └── Этот (det)
  └── книгу (obj)
```

### 3.3 Семантическая разметка

- **Именованные сущности (NER):** разметка имен, организаций, локаций, дат
- **Семантические роли:** агент, пациент, инструмент и т.д.
- **Разрешение кореференции:** связывание упоминаний одних и тех же сущностей
- **Word sense disambiguation:** разрешение многозначности слов

**Пример NER:**
```
[Александр Пушкин]PERSON родился в [Москве]LOC в [1799 году]DATE.
```

### 3.4 Прагматическая и дискурсивная разметка

- Речевые акты
- Коммуникативная структура
- Отношения между предложениями (причина, следствие, контраст)
- Тональность (sentiment analysis)



## 4. Известные текстовые корпусы

### 4.1 Русскоязычные корпусы

**Национальный корпус русского языка (НКРЯ)**
- Объем: более 600 млн словоупотреблений (основной корпус)
- Типы: основной, газетный, параллельный, устный, диалектный, поэтический
- URL: ruscorpora.ru
- Разметка: морфологическая, семантическая, акцентная

**OpenCorpora**
- Объем: около 1 млн токенов
- Открытый корпус с ручной морфологической разметкой
- Используется для обучения морфологических анализаторов

**Taiga Corpus**
- Объем: более 5 млрд токенов
- Интернет-тексты (соцсети, новости, форумы)
- Свободная лицензия

### 4.2 Англоязычные корпусы

**Brown Corpus**
- Первый электронный корпус (1961-1964)
- 1 млн слов американского английского
- 15 жанров, 500 текстов

**British National Corpus (BNC)**
- 100 млн слов британского английского
- 90% письменных текстов, 10% устной речи
- Сбалансированный корпус

**Google Books Ngram Corpus**
- Более 8 млн книг
- N-граммы с частотами по годам (1500-2019)
- Используется для диахронических исследований

### 4.3 Многоязычные корпусы

**Wikipedia Dumps**
- Статьи Википедии на 300+ языках
- Обновляется регулярно
- Свободная лицензия

**Common Crawl**
- Петабайты веб-данных
- Используется для обучения больших языковых моделей
- Доступен бесплатно

**OPUS (Open Parallel Corpus)**
- Параллельные корпусы для машинного перевода
- 90+ языков, миллиарды слов
- Множество доменов (субтитры, юридические тексты, Библия)

### 4.4 Специализированные корпусы

**PropBank / FrameNet**
- Семантическая разметка глаголов и их аргументов
- Используется для семантического парсинга

**OntoNotes**
- Многоуровневая разметка (синтаксис, семантика, кореференция)
- Несколько языков

**SentiWordNet**
- Лексическая база с тональной разметкой
- Используется для анализа тональности



## 5. Применение корпусов в NLP

### 5.1 Обучение языковых моделей

Корпусы — основа для обучения статистических и нейронных моделей:
- **N-граммные модели:** вероятности последовательностей слов
- **Word embeddings:** Word2Vec, GloVe, FastText
- **Языковые модели:** GPT, BERT, трансформеры
- **Машинный перевод:** параллельные корпусы для обучения

### 5.2 Лингвистические исследования

- Изучение частотности слов и конструкций
- Коллокации и устойчивые словосочетания
- Грамматические паттерны
- Семантические изменения в диахронии
- Вариативность языка (диалекты, социолекты)

### 5.3 Лексикография

- Создание словарей на основе реального употребления
- Выявление новых значений слов
- Иллюстративные примеры для словарных статей

### 5.4 Извлечение информации

- Обнаружение именованных сущностей
- Извлечение отношений между сущностями
- Построение онтологий и баз знаний

### 5.5 Оценка моделей

Размеченные корпусы используются как:
- **Обучающие данные** (training set)
- **Валидационные данные** (validation set)
- **Тестовые данные** (test set)

Стандартные задачи:
- POS-tagging (точность ~95-97% для английского)
- Парсинг (UAS/LAS ~90-95%)
- NER (F1-score ~85-95%)



## 6. Инструменты работы с корпусами

### 6.1 Программные средства для создания корпусов

**BootCaT / SketchEngine**
- Автоматический сбор корпусов из веб-источников
- Поддержка множества языков

**WebBootCaT**
- Создание специализированных корпусов через поисковые системы

### 6.2 Инструменты разметки

**Морфологическая разметка:**
- TreeTagger
- Mystem (для русского)
- UDPipe (Universal Dependencies)
- spaCy

**Синтаксическая разметка:**
- Stanford Parser
- MaltParser
- spaCy
- Stanza

**Именованные сущности:**
- Stanford NER
- spaCy
- DeepPavlov (для русского)
- Natasha (для русского)

### 6.3 Системы управления корпусами

**Corpus Query Systems:**
- **CQP (Corpus Query Processor):** мощный язык запросов
- **AntConc:** бесплатный инструмент для анализа корпусов
- **Sketch Engine:** веб-платформа с большими корпусами и инструментами анализа
- **NoSketch Engine:** открытая альтернатива Sketch Engine

**Поисковые запросы в корпусах:**
```
Простой поиск: "читать"
С учетом леммы: [lemma="читать"]
С POS-тегом: [pos="VERB"]
Словосочетания: [lemma="читать"] [pos="NOUN"]
Регулярные выражения: [word="чита.*"]
```

### 6.4 Библиотеки для работы с корпусами

**Python:**
```python
# NLTK (Natural Language Toolkit)
import nltk
from nltk.corpus import brown

# Загрузка корпуса Brown
brown_words = brown.words()
print(len(brown_words))  # Количество слов

# spaCy
import spacy
nlp = spacy.load("ru_core_news_sm")
doc = nlp("Это пример предложения.")
for token in doc:
    print(token.text, token.pos_, token.dep_)
```

**R:**
```r
# quanteda
library(quanteda)
corpus <- corpus(data_char_ukimmig2010)
summary(corpus)
```



## 7. Проблемы и вызовы

### 7.1 Проблема репрезентативности

- Невозможно охватить весь язык
- Интернет-корпусы смещены к определенным темам и стилям
- Недопредставленность разговорной речи
- Региональные варианты языка

### 7.2 Качество разметки

- Ошибки автоматической разметки (точность 90-95%)
- Высокая стоимость ручной разметки
- Согласованность разметчиков (inter-annotator agreement)
- Сложность в семантической и прагматической разметке

### 7.3 Авторские права и этика

- Ограничения на использование авторских текстов
- Проблема конфиденциальности в корпусах устной речи
- Bias в данных (гендерные, расовые стереотипы)
- Проблема токсичного контента

### 7.4 Технические проблемы

- Хранение больших объемов данных
- Скорость обработки мегакорпусов
- Версионирование и обновление корпусов
- Стандартизация форматов



## 8. Будущее корпусной лингвистики

### 8.1 Интеграция с большими языковыми моделями

- Предобученные модели (BERT, GPT) как универсальные корпусные ресурсы
- Генеративные модели для аугментации данных
- Модели как "сжатые корпусы"

### 8.2 Мультимодальные корпусы

- Тексты + изображения
- Тексты + аудио + видео
- Жесты и язык тела в корпусах устной речи

### 8.3 Динамические корпусы

- Корпусы социальных медиа в реальном времени
- Мониторинг изменений языка
- Отслеживание неологизмов и трендов

### 8.4 Корпусы редких языков

- Документация исчезающих языков
- Корпусы малых языков для сохранения культурного наследия
- Низкоресурсные языки в NLP



## Практические упражнения

### Упражнение 1: Анализ частотности слов

**Задание:** Используя библиотеку NLTK, загрузите корпус Brown и найдите 20 наиболее частотных слов.

**Подсказка:**
```python
import nltk
from nltk.corpus import brown
from nltk.probability import FreqDist

# Ваш код здесь
words = brown.words()
fdist = FreqDist(words)
# Продолжите...
```

### Упражнение 2: Создание мини-корпуса

**Задание:** 
1. Соберите 10 текстов из разных источников (новости, блоги, научные статьи)
2. Создайте JSON-файл с метаданными для каждого текста
3. Структурируйте корпус в виде папок: `corpus/news/`, `corpus/blogs/`, `corpus/scientific/`

**Требования к метаданным:**
- ID документа
- Название
- Автор
- Дата
- Жанр
- Количество слов

### Упражнение 3: Морфологическая разметка

**Задание:** Используя spaCy или Mystem, проведите морфологическую разметку следующих предложений:

```
1. В лесу родилась ёлочка.
2. Студенты сдали экзамен досрочно.
3. Завтра будет солнечная погода.
```

Сохраните результат в формате CoNLL-U.

### Упражнение 4: Поиск коллокаций

**Задание:** Найдите в корпусе (можно использовать Brown corpus или НКРЯ) наиболее частые биграммы (словосочетания из двух слов).

**Подсказка для NLTK:**
```python
from nltk.collocations import BigramCollocationFinder
from nltk.metrics import BigramAssocMeasures

# Ваш код
```

### Упражнение 5: Извлечение именованных сущностей

**Задание:** Используя spaCy, извлеките все именованные сущности из следующего текста и классифицируйте их по типам (PERSON, LOC, ORG, DATE):

```
Лев Толстой родился в 1828 году в Ясной Поляне. 
Он учился в Казанском университете, а позже работал над романом "Война и мир". 
В 1862 году Толстой женился на Софье Берс.
```

### Упражнение 6: Дизайн корпуса

**Задание:** Разработайте план создания специализированного корпуса для изучения языка социальных медиа русскоязычного сегмента интернета.

**Опишите:**
1. Цели и задачи корпуса
2. Источники данных
3. Объем корпуса (целевой)
4. Типы разметки
5. Схему метаданных
6. Юридические и этические соображения

### Упражнение 7: Анализ согласованности разметки

**Задание:** Два разметчика независимо друг от друга разметили следующие предложения по частям речи. Вычислите процент согласованности (agreement rate).

**Разметчик 1:**
```
Он/PRON пришел/VERB домой/ADV поздно/ADV ./PUNCT
```

**Разметчик 2:**
```
Он/PRON пришел/VERB домой/NOUN поздно/ADV ./PUNCT
```

### Упражнение 8: Работа с параллельным корпусом

**Задание:** Используя параллельный корпус (например, субтитры из OPUS), найдите примеры перевода русского слова "дело" на английский язык. Классифицируйте переводы по значениям.

### Упражнение 9: Построение n-граммной модели

**Задание:** На основе небольшого корпуса постройте биграммную языковую модель и вычислите вероятность предложения "Кошка села на стул".

**Подсказка:**
```python
from nltk.lm import MLE
from nltk.lm.preprocessing import padded_everygram_pipeline

# Обучите биграммную модель
# Вычислите вероятность
```

### Упражнение 10: Веб-скрапинг для корпуса

**Задание:** Напишите скрипт на Python для сбора новостных статей с веб-сайта (например, используя BeautifulSoup). Извлеките текст, заголовок и дату публикации для 20 статей.

**Требования:**
- Соблюдайте правила robots.txt
- Добавьте задержки между запросами
- Сохраните данные в структурированном формате (JSON/CSV)



## Контрольные вопросы

### Теоретические вопросы

1. Что такое корпус текстов и чем он отличается от простой коллекции текстов?

2. Перечислите основные критерии репрезентативности корпуса.

3. Объясните разницу между сбалансированным и специализированным корпусом. Приведите примеры ситуаций, когда предпочтителен каждый из них.

4. Что такое морфологическая разметка? Какие типы информации она включает?

5. Опишите основные форматы представления корпусных данных (plain text, XML, CoNLL-U, JSON). В каких случаях предпочтителен каждый формат?

6. Что такое метаданные в контексте корпусной лингвистики? Приведите примеры обязательных и дополнительных метаданных.

7. Объясните разницу между constituency parsing и dependency parsing.

8. Что такое параллельный корпус и для каких задач NLP он используется?

9. Какие проблемы связаны с автоматической разметкой корпусов?

10. Опишите этапы создания текстового корпуса от планирования до публикации.

### Практические вопросы

11. Вы создаете корпус для обучения модели распознавания именованных сущностей в медицинских текстах. Какие источники данных вы будете использовать и какие юридические проблемы могут возникнуть?

12. Как оценить качество морфологической разметки корпуса? Какие метрики можно использовать?

13. Предположим, вам нужно создать корпус для изучения современного молодежного сленга. Опишите дизайн такого корпуса: источники, объем, типы разметки.

14. В чем заключается проблема bias (смещения) в корпусных данных? Как это может повлиять на модели NLP, обученные на таких данных?

15. Вы обнаружили, что автоматический морфологический анализатор для русского языка имеет точность 92%. Достаточно ли этого для создания размеченного корпуса объемом 10 млн слов? Обоснуйте ответ.

### Исследовательские вопросы

16. Сравните подходы к созданию корпусов в 1960-х годах (Brown Corpus) и в настоящее время. Как изменились методы сбора данных, объемы, типы разметки?

17. Обсудите роль корпусов в эпоху больших языковых моделей (GPT, BERT). Остаются ли традиционные корпусы актуальными или их заменяют предобученные модели?

18. Какие этические проблемы возникают при создании корпусов на основе данных из социальных сетей?

19. Предложите методы улучшения репрезентативности корпуса устной разговорной речи.

20. Как можно использовать корпусные методы для изучения языковых изменений во времени (диахронический анализ)?



## Рекомендуемая литература

### Основная литература

1. **Manning, C. D., & Schütze, H.** (1999). *Foundations of Statistical Natural Language Processing*. MIT Press.

2. **Jurafsky, D., & Martin, J. H.** (2023). *Speech and Language Processing* (3rd ed.). [Доступно онлайн]

3. **McEnery, T., & Hardie, A.** (2011). *Corpus Linguistics: Method, Theory and Practice*. Cambridge University Press.

4. **Захаров В. П., Богданова С. Ю.** (2011). *Корпусная лингвистика*. Иркутск: ИГЛУ.

### Дополнительная литература

5. **Sinclair, J.** (1991). *Corpus, Concordance, Collocation*. Oxford University Press.

6. **Biber, D., Conrad, S., & Reppen, R.** (1998). *Corpus Linguistics: Investigating Language Structure and Use*. Cambridge University Press.

7. **Leech, G.** (2005). Adding linguistic annotation. In *Developing Linguistic Corpora: a Guide to Good Practice*.

### Онлайн-ресурсы

8. **Universal Dependencies:** https://universaldependencies.org/
9. **NLTK Book:** https://www.nltk.org/book/
10. **Национальный корпус русского языка:** https://ruscorpora.ru/
11. **spaCy Documentation:** https://spacy.io/
12. **Corpus Linguistics Tutorial:** https://www.corpuslingualistics.com/



## Глоссарий

**Аннотация** — процесс добавления лингвистической информации к тексту.

**Биграмма** — последовательность из двух соседних элементов (слов, символов).

**Дистрибуция** — распределение языковых единиц в тексте или корпусе.

**Зависимость (dependency)** — синтаксическое отношение между словами в предложении.

**Коллокация** — устойчивое словосочетание, компоненты которого часто встречаются вместе.

**Конкорданс** — список всех употреблений слова в контексте.

**Лемма** — начальная (словарная) форма слова.

**N-грамма** — последовательность из N элементов.

**Парсинг** — синтаксический анализ предложения.

**Токенизация** — разбиение текста на отдельные единицы (токены).

**Частеречная разметка (POS-tagging)** — определение части речи для каждого слова.

