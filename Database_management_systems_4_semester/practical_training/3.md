# Команда WHERE в операторе SELECT




## 1. Введение

Команда WHERE используется в SQL для фильтрации данных из таблицы на основе заданных условий. Она позволяет выбрать только те строки, которые соответствуют определённым критериям. WHERE является одной из самых часто используемых команд в SQL и критична для работы с базами данных.

**Синтаксис:**
```sql
SELECT column1, column2, ...
FROM table_name
WHERE condition;
```



## 2. Основные операторы сравнения в WHERE

### 2.1 Оператор равенства (=)

Используется для поиска точного совпадения значений.

**Пример:**
```sql
SELECT * FROM texts
WHERE language = 'Russian';
```

Этот запрос выберет все тексты, язык которых равен 'Russian'.

### 2.2 Оператор неравенства (!=, <>)

Используется для исключения определённых значений.

**Пример:**
```sql
SELECT * FROM linguists
WHERE status != 'inactive';
```

или

```sql
SELECT * FROM linguists
WHERE status <> 'inactive';
```

Оба варианта выберут всех лингвистов, статус которых не равен 'inactive'.

### 2.3 Операторы сравнения (>, <, >=, <=)

Используются для числовых и временных значений.

**Примеры:**

```sql
-- Больше
SELECT * FROM documents
WHERE year_created > 2020;

-- Меньше
SELECT * FROM words
WHERE frequency < 100;

-- Больше или равно
SELECT * FROM articles
WHERE page_count >= 10;

-- Меньше или равно
SELECT * FROM corpora
WHERE size_mb <= 500;
```



## 3. Логические операторы в WHERE

### 3.1 Оператор AND

Возвращает строки, которые удовлетворяют ВСЕ условиям.

**Синтаксис:**
```sql
SELECT * FROM table_name
WHERE condition1 AND condition2 AND condition3;
```

**Пример:**
```sql
SELECT * FROM texts
WHERE language = 'Russian' AND year > 2015 AND category = 'fiction';
```

Этот запрос выберет русские тексты художественной литературы, созданные после 2015 года.

### 3.2 Оператор OR

Возвращает строки, которые удовлетворяют ХОТЯ БЫ одному условию.

**Синтаксис:**
```sql
SELECT * FROM table_name
WHERE condition1 OR condition2 OR condition3;
```

**Пример:**
```sql
SELECT * FROM linguists
WHERE specialization = 'syntax' OR specialization = 'phonetics' OR specialization = 'semantics';
```

Этот запрос выберет всех лингвистов, специализирующихся на синтаксисе, фонетике или семантике.

### 3.3 Оператор NOT

Отрицает условие.

**Синтаксис:**
```sql
SELECT * FROM table_name
WHERE NOT condition;
```

**Пример:**
```sql
SELECT * FROM documents
WHERE NOT language = 'English';
```

или эквивалентно:

```sql
SELECT * FROM documents
WHERE language != 'English';
```

### 3.4 Комбинация логических операторов

**Пример с приоритетом операций:**
```sql
SELECT * FROM texts
WHERE (language = 'Russian' OR language = 'English')
  AND year >= 2010
  AND genre != 'news';
```

Скобки помогают определить порядок выполнения условий.



## 4. Специальные операторы WHERE

### 4.1 Оператор IN

Проверяет, входит ли значение в список.

**Синтаксис:**
```sql
SELECT * FROM table_name
WHERE column_name IN (value1, value2, value3);
```

**Пример:**
```sql
SELECT * FROM linguists
WHERE specialization IN ('morphology', 'syntax', 'phonetics');
```

Это эквивалентно:
```sql
SELECT * FROM linguists
WHERE specialization = 'morphology' 
   OR specialization = 'syntax' 
   OR specialization = 'phonetics';
```

**Преимущество:** IN более читаем и эффективен при большом количестве условий.

### 4.2 Оператор BETWEEN

Проверяет, находится ли значение в диапазоне.

**Синтаксис:**
```sql
SELECT * FROM table_name
WHERE column_name BETWEEN value1 AND value2;
```

**Пример:**
```sql
SELECT * FROM words
WHERE word_length BETWEEN 5 AND 10;
```

Этот запрос выберет все слова длиной от 5 до 10 символов (включительно).

### 4.3 Оператор LIKE

Ищет подобные значения с использованием шаблонов.

**Синтаксис:**
```sql
SELECT * FROM table_name
WHERE column_name LIKE pattern;
```

**Шаблоны:**
- `%` — ноль или более символов
- `_` — ровно один символ

**Примеры:**

```sql
-- Все слова, начинающиеся с 'при'
SELECT * FROM words
WHERE word LIKE 'при%';

-- Все слова, заканчивающиеся на 'ение'
SELECT * FROM words
WHERE word LIKE '%ение';

-- Все слова, содержащие 'лог'
SELECT * FROM words
WHERE word LIKE '%лог%';

-- Все слова длиной ровно 5 символов
SELECT * FROM words
WHERE word LIKE '_____';

-- Слова вида: [любой символ]о[любой символ]
SELECT * FROM words
WHERE word LIKE '_о_';
```

### 4.4 Оператор IS NULL / IS NOT NULL

Проверяет наличие значения NULL.

**Синтаксис:**
```sql
SELECT * FROM table_name
WHERE column_name IS NULL;

SELECT * FROM table_name
WHERE column_name IS NOT NULL;
```

**Пример:**
```sql
-- Тексты без указанного автора
SELECT * FROM texts
WHERE author IS NULL;

-- Тексты с указанным автором
SELECT * FROM texts
WHERE author IS NOT NULL;
```



## 5. Примеры практических задач

Для примеров используем следующую структуру таблиц:

### Таблица: texts
| id | title                | language | year | category    | pages | author      |
|----|----------------------|----------|------|-------------|-------|-------------|
| 1  | Война и мир          | Russian  | 1869 | fiction     | 1200  | Толстой     |
| 2  | Crime and Punishment | Russian  | 1866 | fiction     | 670   | Достоевский |
| 3  | Английский язык      | English  | 2020 | educational | 300   | NULL        |

### Таблица: words
| id | word | language | frequency | word_length | part_of_speech |
|----|------|----------|-----------|-------------|----------------|
| 1  | быть | Russian  | 15000     | 4           | verb           |
| 2  | и    | Russian  | 25000     | 1           | conjunction    |
| 3  | book | English  | 12000     | 4           | noun           |

### Примеры запросов:

**Пример 1:** Найти все русские тексты
```sql
SELECT title, author, year FROM texts
WHERE language = 'Russian';
```

**Результат:**

| title                | author      | year |
|----------------------|-------------|------|
| Война и мир          | Толстой     | 1869 |
| Crime and Punishment | Достоевский | 1866 |

**Пример 2:** Найти слова, встречающиеся чаще 10000 раз
```sql
SELECT word, frequency FROM words
WHERE frequency > 10000;
```

**Результат:**

| word | frequency |
|------|-----------|
| быть | 15000     |
| и    | 25000     |
| book | 12000     |

**Пример 3:** Найти русские слова из 1-3 символов
```sql
SELECT word, word_length FROM words
WHERE language = 'Russian' AND word_length BETWEEN 1 AND 3;
```

**Результат:**

| word | word_length |
|------|-------------|
| быть | 4           | 
| и    | 1           |

**Пример 4:** Найти тексты на русском или английском языке, созданные после 1860 года
```sql
SELECT title, language, year FROM texts
WHERE (language = 'Russian' OR language = 'English')
  AND year > 1860;
```

**Пример 5:** Найти слова, начинающиеся с 'б'
```sql
SELECT word FROM words
WHERE word LIKE 'б%';
```

**Результат:**

| word |
|------|
| быть |



## 6. Практические упражнения

Используйте представленные таблицы для выполнения следующих упражнений:

### Упражнение 1: Операторы сравнения

Напишите запросы для:

1. Найти все тексты с количеством страниц менее 500
```
SELECT _____ FROM texts
WHERE ______________________;
```

2. Найти слова с точной длиной 4 символа
```
SELECT _____ FROM words
WHERE ______________________;
```

3. Найти тексты, созданные в 1869 году или позже
```
SELECT _____ FROM texts
WHERE ______________________;
```

### Упражнение 2: Логические операторы AND, OR, NOT

Напишите запросы для:

1. Найти русские глаголы
```
SELECT _____ FROM words
WHERE language = 'Russian' AND ______________________;
```

2. Найти тексты, это не словари и не учебники
```
SELECT _____ FROM texts
WHERE NOT category IN ('dictionary', 'textbook');
```

3. Найти классические русские тексты (написаны до 1900 года) или английские учебники
```
SELECT _____ FROM texts
WHERE (language = 'Russian' AND year < 1900)
   OR (language = 'English' AND category = 'educational');
```

### Упражнение 3: Оператор IN

Напишите запросы для:

1. Найти все слова, относящиеся к частям речи: noun, verb, adjective
```
SELECT word FROM words
WHERE part_of_speech IN ('noun', 'verb', 'adjective');
```

2. Найти тексты, авторами которых являются Толстой, Достоевский или Чехов
```
SELECT _____ FROM texts
WHERE ______________________;
```

### Упражнение 4: Оператор BETWEEN

Напишите запросы для:

1. Найти слова длиной от 5 до 8 символов
```
SELECT word FROM words
WHERE word_length BETWEEN 5 AND 8;
```

2. Найти тексты, созданные между 1850 и 1900 годами
```
SELECT _____ FROM texts
WHERE ______________________;
```

### Упражнение 5: Оператор LIKE

Напишите запросы для:

1. Найти все слова, начинающиеся с 'при'
```
SELECT word FROM words
WHERE word LIKE 'при%';
```

2. Найти все тексты, названия которых содержат слово 'война' (на любом языке)
```
SELECT _____ FROM texts
WHERE ______________________;
```

3. Найти слова, заканчивающиеся на 'tion' (суффикс английских существительных)
```
SELECT _____ FROM words
WHERE ______________________;
```

### Упражнение 6: Оператор IS NULL / IS NOT NULL

Напишите запросы для:

1. Найти все тексты, у которых известен автор
```
SELECT title, author FROM texts
WHERE author IS NOT NULL;
```

2. Найти тексты, для которых автор не указан
```
SELECT _____ FROM texts
WHERE ______________________;
```

### Упражнение 7: Комбинированные условия

Напишите запросы для:

1. Найти русские слова длиной от 3 до 6 символов, которые не являются предлогами
```
SELECT word, word_length FROM words
WHERE language = 'Russian' 
  AND word_length BETWEEN 3 AND 6 
  AND part_of_speech != 'preposition';
```

2. Найти все классические тексты (до 1900 года) на английском или русском языке с более чем 200 страницами
```
SELECT _____ FROM texts
WHERE _________________________________
  AND _________________________________
  AND _________________________________;
```

3. Найти часто встречающиеся (>10000) русские слова, название которых начинается с гласной
```
SELECT _____ FROM words
WHERE language = 'Russian' 
  AND frequency > 10000
  AND (word LIKE 'а%' OR word LIKE 'е%' OR word LIKE 'и%' OR word LIKE 'о%' OR word LIKE 'у%');
```



## 7. Практический проект: Анализ текстового корпуса

Представьте, что вы работаете с корпусом текстов для обработки естественного языка. Используя WHERE, решите следующие задачи:

### Задача 1: Подготовка данных для морфологического анализа
Выберите все русские слова для морфологического анализа:

```sql
SELECT id, word, part_of_speech, word_length FROM words
WHERE language = 'Russian';
```

**Вопрос:** Какие результаты вы получили?

### Задача 2: Фильтрация по частотности
При работе с корпусом часто нужно исключить редкие слова. Выберите слова с частотой более 5000:

```sql
SELECT word, frequency FROM words
WHERE frequency > 5000
ORDER BY frequency DESC;
```

**Вопрос:** Почему полезно исключать редкие слова?

### Задача 3: Подготовка обучающего набора
Выберите все тексты, подходящие для обучения (написанные после 1800 года, более 500 страниц):

```sql
SELECT title, author, year, pages FROM texts
WHERE year > 1800 AND pages > 500;
```

### Задача 4: Поиск специализированного контента
Найти все образовательные материалы на английском языке:

```sql
SELECT title, year FROM texts
WHERE language = 'English' AND category = 'educational';
```



## 8. Частые ошибки и их исправления

### Ошибка 1: Неправильное использование AND вместо OR

**Неправильно:**
```sql
SELECT * FROM texts
WHERE language = 'Russian' AND language = 'English';
```

Это никогда не вернёт результаты, так как язык не может быть одновременно русским И английским.

**Правильно:**
```sql
SELECT * FROM texts
WHERE language = 'Russian' OR language = 'English';
```

### Ошибка 2: Забывается часть условия

**Неправильно:**
```sql
SELECT * FROM words
WHERE word LIKE 'при%' AND word_length;
```

Условие неполное.

**Правильно:**
```sql
SELECT * FROM words
WHERE word LIKE 'при%' AND word_length >= 4;
```

### Ошибка 3: Неправильное использование NULL

**Неправильно:**
```sql
SELECT * FROM texts
WHERE author = NULL;
```

NULL нельзя сравнивать с оператором =.

**Правильно:**
```sql
SELECT * FROM texts
WHERE author IS NULL;
```

### Ошибка 4: Забытые кавычки в текстовых значениях

**Неправильно:**
```sql
SELECT * FROM texts
WHERE language = Russian;
```

**Правильно:**
```sql
SELECT * FROM texts
WHERE language = 'Russian';
```



## 9. Контрольные вопросы

### Базовый уровень

1. **Что такое оператор WHERE и для чего он используется?**
   - Объясните роль WHERE в SELECT запросах
   - Как WHERE помогает в обработке больших наборов данных?

2. **Какие операторы сравнения вы знаете?**
   - Перечислите минимум пять операторов сравнения
   - Приведите пример использования каждого

3. **В чём разница между AND и OR?**
   - Когда использовать AND?
   - Когда использовать OR?
   - Что произойдёт, если их поменять?

4. **Как работает оператор LIKE?**
   - Что означает символ %?
   - Что означает символ _?
   - Приведите пример для поиска слов из 5 символов

### Средний уровень

5. **Напишите запрос для поиска русских текстов, созданных между 1850 и 1920 годами:**
   ```
   ___________________________________
   ```

6. **Как найти все слова, содержащие букву 'о' в середине?**
   ```
   ___________________________________
   ```

7. **В чём разница между = NULL и IS NULL?**
   - Почему IS NULL необходимо для проверки NULL значений?

8. **Напишите запрос, который найдёт слова, это:
   - русского языка
   - длиной более 5 символов
   - часто встречаемые (частота > 10000)**
   ```
   ___________________________________
   ```

### Продвинутый уровень

9. **Оптимизируйте следующий запрос:**
   ```sql
   SELECT * FROM words
   WHERE language = 'Russian' 
      OR language = 'Uzbek' 
      OR language = 'English';
   ```

10. **Напишите запрос для поиска классических русских текстов (до 1900 года) с известными авторами, но исключив ту литературу, которая короче 300 страниц:**
    ```
    ___________________________________
    ```

11. **Какой из этих запросов более эффективен и почему?**
    
    Вариант 1:
    ```sql
    SELECT * FROM texts
    WHERE category != 'dictionary' 
      AND category != 'textbook' 
      AND category != 'reference';
    ```
    
    Вариант 2:
    ```sql
    SELECT * FROM texts
    WHERE category NOT IN ('dictionary', 'textbook', 'reference');
    ```

12. **Составьте запрос для лингвистического анализа:**
    
    Найти все слова русского языка, которые:
    - начинаются с префикса 'при' или 'про'
    - содержат от 6 до 10 символов
    - встречаются в текстах более 100 раз
    
    Предложите решение и объясните, какие операторы WHERE вы используете.

### Творческие задания

13. **Практическое применение:**
    
    Вы работаете над корпусом текстов для обучения модели обработки естественного языка. Какие WHERE условия вы бы использовали, чтобы:
    - Отфильтровать шумные данные?
    - Выбрать репрезентативную выборку текстов?
    - Подготовить набор для обучения морфологического анализатора?

14. **Анализ производительности:**
    
    Объясните, как количество и сложность WHERE условий могут повлиять на скорость выполнения SQL запроса.

15. **Создание собственного запроса:**
    
    Используя любые две таблицы, напишите три запроса:
    - один с простым WHERE условием
    - один с комбинацией AND/OR
    - один с использованием LIKE или BETWEEN



## 10. Рекомендуемые ресурсы для дальнейшего изучения

1. **SQL документация:**
   - W3Schools SQL Tutorial (https://www.w3schools.com/sql/)
   - Official SQL Standards

2. **Книги:**
   - "Learning SQL" - Alan Beaulieu
   - "SQL Fundamentals" - Lex de Haan, Melanie Caffrey

3. **Практические платформы:**
   - LeetCode SQL Problems
   - HackerRank SQL Challenges
   - SQLZoo Interactive SQL Tutorial

4. **Для лингвистов:**
   - "Language Corpora: Design and Analysis" - Douglas Biber
   - NLTK (Natural Language Toolkit) Documentation

